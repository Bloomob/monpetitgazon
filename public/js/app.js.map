{"version":3,"sources":["app/js/app.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAvbA;AAAA","file":"public/js/app.js","sourcesContent":["$(function () {\r\n    \"use strict\";\r\n\r\n    /* Variables gloables */\r\n    var postes = [\r\n        'Aucun',\r\n        'Gardien',\r\n        'Défenseur',\r\n        'Milieu',\r\n        'Attaquant'\r\n    ];\r\n\r\n    /* Fonctions globales */\r\n\r\n    function getResultats() {\r\n        $.getJSON('data/journee_2_1.json', function (data) {\r\n            // console.log(journee);\r\n            var journee = data.data.results,\r\n                date = new Date(journee.date),\r\n                listeMatchs = journee.matches,\r\n                $resultats = $('.page'),\r\n                i,\r\n                teamHome,\r\n                teamAway;\r\n\r\n            for (i in listeMatchs) {\r\n                if (listeMatchs.hasOwnProperty(i)) {\r\n                    teamHome = listeMatchs[i].teamHome;\r\n                    teamAway = listeMatchs[i].teamAway;\r\n                    // console.log(teamHome, teamAway);\r\n                    $resultats.append(\r\n                        $('<div/>').addClass('row').append(\r\n                            $('<div/>').addClass('col-sm-5 text-right').text(teamHome.name),\r\n                            $('<div/>').addClass('col-sm-2 text-center').append(\r\n                                $('<a/>').attr('href', '?match').text(teamHome.score + ' - ' + teamAway.score)\r\n                            ),\r\n                            $('<div/>').addClass('col-sm-5').text(teamAway.name)\r\n                        )\r\n                    );\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    function getMatch() {\r\n        $.getJSON('data/match_2_1_4.json', function (data) {\r\n            /*console.log(data.data);\r\n            console.log(data.data.players.away[0].name);*/\r\n\r\n            var teamHome = data.data.teamHome,\r\n                teamAway = data.data.teamAway;\r\n\r\n            $('.match').append(\r\n                $('<div/>').addClass('row').append(\r\n                    $('<div/>').addClass('col-sm-5 text-right').text(teamHome.name),\r\n                    $('<div/>').addClass('col-sm-2 text-center').text(teamHome.score + ' - ' + teamAway.score),\r\n                    $('<div/>').addClass('col-sm-5').text(teamAway.name)\r\n                )\r\n            );\r\n        });\r\n    }\r\n\r\n    function getStatistiques() {\r\n\r\n        var allRating = [];\r\n\r\n        $.ajax({\r\n            url: \"ajax/liste.php\",\r\n            method: \"POST\",\r\n            dataType : 'json',\r\n            data: { page: 'statistiques' }\r\n        }).done(function (data) {\r\n            // console.log(data);\r\n\r\n            $('.page').append(\r\n                $('<div/>').addClass('row').append(\r\n                    $('<div/>').addClass('col-sm-4').append(\r\n                        $('<h3/>').text('Les plus gros transferts'),\r\n                        $('<div/>').addClass('plus-gros-transferts')\r\n                    ),\r\n                    $('<div/>').addClass('col-sm-4'),\r\n                    $('<div/>').addClass('col-sm-4')\r\n                )\r\n            );\r\n\r\n            var stat_max_price = data.max_price,\r\n                $tableau = $('.plus-gros-transferts'),\r\n                i,\r\n                $ligne;\r\n\r\n            for (i in stat_max_price) {\r\n                if (stat_max_price.hasOwnProperty(i)) {\r\n                    $ligne = $('<div/>').addClass('row').append(\r\n                        $('<div/>').addClass('col-sm-6 text-right').text(stat_max_price[i].nom),\r\n                        $('<div/>').addClass('col-sm-6').text(stat_max_price[i].prix)\r\n                    );\r\n                    $tableau.append($ligne);\r\n                }\r\n            }\r\n        });\r\n\r\n        /*\r\n        $.getJSON('data/ligue1/match_20_01.json', function( data ) {\r\n            console.log(data);\r\n\r\n            var joueurs = data.Home.players;\r\n            for(i in joueurs) {\r\n                var joueur = { 'id': joueurs[i].info.idplayer, 'name': joueurs[i].info.lastname, 'rating': [joueurs[i].info.note_final_2015] };\r\n\r\n                allRating.push(joueur);\r\n            }\r\n        });\r\n\r\n        $.getJSON('data/match_2_1_4.json', function( data ) {\r\n            console.log(data.data);\r\n            var joueurs = data.data.players;\r\n\r\n\r\n            for(lieu in joueurs) {\r\n                var liste = joueurs[lieu];\r\n\r\n                for(i in liste){\r\n                    console.log(liste[i]);\r\n                    var joueur = { 'id': liste[i].id, 'name': liste[i].name, 'rating': [liste[i].rating] };\r\n                    allRating.push(joueur);\r\n                    $('.statistiques').append(\r\n                        $('<div/>').addClass('row').append(\r\n                            $('<div/>').addClass('col-sm-6').text(liste[i].name),\r\n                            $('<div/>').addClass('col-sm-6').text(liste[i].rating)\r\n                        )\r\n                    )\r\n                }\r\n            }\r\n            console.log(allRating);\r\n        }); */\r\n    }\r\n\r\n    function getClassement() {\r\n        $.ajax({\r\n            url: \"ajax/liste.php\",\r\n            method: \"POST\",\r\n            dataType : 'json',\r\n            data: { page: 'classement' }\r\n        }).done(function (data) {\r\n            var classement = data.ranking,\r\n                clubs = data.teams,\r\n                $tableau,\r\n                i,\r\n                donnees,\r\n                $ligne,\r\n                equipe;\r\n\r\n            $tableau = $('<table/>').addClass('table').append(\r\n                $('<thead/>').append(\r\n                    $('<tr/>').append(\r\n                        $('<th/>'),\r\n                        $('<th/>').text('Equipe'),\r\n                        $('<th/>').text('Série'),\r\n                        $('<th/>').text('J'),\r\n                        $('<th/>').text('G'),\r\n                        $('<th/>').text('N'),\r\n                        $('<th/>').text('P'),\r\n                        $('<th/>').text('Bp'),\r\n                        $('<th/>').text('Bc'),\r\n                        $('<th/>').text('Diff'),\r\n                        $('<th/>').text('Pts')\r\n                    )\r\n                ),\r\n                $('<tbody/>')\r\n            );\r\n            for (i = 0; i < classement.length; i += 1) {\r\n                donnees = classement[i];\r\n                $ligne = $('<tr/>');\r\n\r\n                for (equipe in donnees) {\r\n                    if (donnees.hasOwnProperty(equipe)) {\r\n                        if (equipe === 'teamid') {\r\n                            $ligne.append($('<td/>').text(clubs[donnees[equipe]].name));\r\n                        } else if (equipe === 'rank') {\r\n                            $ligne.prepend($('<td/>').text(donnees[equipe]));\r\n                        } else {\r\n                            $ligne.append($('<td/>').text(donnees[equipe]));\r\n                        }\r\n                    }\r\n                }\r\n                $tableau.append($ligne);\r\n            }\r\n            $('.page').append($tableau);\r\n        });\r\n    }\r\n\r\n    function getEffectifs() {\r\n        $.ajax({\r\n            url: \"ajax/liste.php\",\r\n            method: \"POST\",\r\n            dataType : 'json',\r\n            data: { page: 'effectif' }\r\n        }).done(function (data) {\r\n            var clubs = data.teamsid,\r\n                effectifs = data.teams,\r\n                i,\r\n                effectif,\r\n                tab_joueurs,\r\n                equipe_joueurs,\r\n                $ligne;\r\n\r\n            function redirect(e) {\r\n                window.location.href = '?joueur&id=' + $(e.target).data('idplayer');\r\n            }\r\n\r\n            $('.page').append(\r\n                $('<div/>').addClass('filtres').append(\r\n                    $('<div/>').addClass('row').append(\r\n                        $('<div/>').addClass('col-md-2').append(\r\n                            $('<label/>').text('Equipe')\r\n                        ),\r\n                        $('<div/>').addClass('col-md-10').append(\r\n                            $('<select/>').addClass('selectpicker').append(\r\n                                $('<option/>').val('all').text('Toutes')\r\n                            )\r\n                        )\r\n                    )\r\n                ),\r\n                $('<table/>').addClass('table').append(\r\n                    $('<thead/>').append(\r\n                        $('<tr/>').append(\r\n                            $('<th/>').text('Prénom'),\r\n                            $('<th/>').text('Nom'),\r\n                            $('<th/>').text('Poste'),\r\n                            $('<th/>').text('Club'),\r\n                            $('<th/>').text('Prix d\\'achat'),\r\n                            $('<th/>').text('Team MPG')\r\n                        )\r\n                    ),\r\n                    $('<tbody/>')\r\n                )\r\n            );\r\n\r\n            for (i = 0; i < clubs.length; i += 1) {\r\n                $('.page .filtres .selectpicker').append($('<option/>').val(clubs[i].id).text(clubs[i].name));\r\n            }\r\n\r\n            for (effectif in effectifs) {\r\n                if (effectifs.hasOwnProperty(effectif)) {\r\n                    tab_joueurs = effectifs[effectif].players;\r\n                    equipe_joueurs = effectifs[effectif].name;\r\n\r\n                    for (i = 0; i < tab_joueurs.length; i += 1) {\r\n                        $ligne = $('<tr/>').attr('data-idplayer', tab_joueurs[i].id).append(\r\n                            $('<td/>').text(tab_joueurs[i].firstname),\r\n                            $('<td/>').text(tab_joueurs[i].lastname),\r\n                            $('<td/>').text(postes[tab_joueurs[i].position]),\r\n                            $('<td/>').text(tab_joueurs[i].club),\r\n                            $('<td/>').text(tab_joueurs[i].price_paid),\r\n                            $('<td/>').attr('data-teamid', effectifs[effectif].id).text(equipe_joueurs)\r\n                        ).on('click', redirect);\r\n                        $('.page table tbody').append($ligne);\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    function getLigue1() {\r\n        $.ajax({\r\n            url: \"ajax/liste.php\",\r\n            method: \"POST\",\r\n            dataType : 'json',\r\n            data: { page: 'ligue1' }\r\n        }).done(function (data) {\r\n            var matchs = data,\r\n                liste_notes = [],\r\n                liste_journees = [],\r\n                i,\r\n                j,\r\n                journee,\r\n                j_home,\r\n                j_away,\r\n                eq_home,\r\n                eq_away,\r\n                joueurs,\r\n                result,\r\n                joueur,\r\n                index,\r\n                $ligne_head,\r\n                $ligne,\r\n                notes,\r\n                k;\r\n\r\n            function compare(e) {\r\n                return e.id === j;\r\n            }\r\n\r\n            for (i in matchs) {\r\n                if (matchs.hasOwnProperty(i)) {\r\n                    // console.log(matchs[i]);\r\n                    journee = i.split('_')[1];\r\n                    j_home = matchs[i].Home.players;\r\n                    eq_home = matchs[i].Home.club;\r\n                    j_away = matchs[i].Away.players;\r\n                    eq_away = matchs[i].Away.club;\r\n                    joueurs = Object.assign(j_home, j_away);\r\n\r\n                    if (liste_journees.indexOf(journee) === -1) {\r\n                        liste_journees.push(journee);\r\n                    }\r\n\r\n                    for (j in joueurs) {\r\n                        if (joueurs.hasOwnProperty(j)) {\r\n                            result = $.grep(liste_notes, compare);\r\n\r\n                            if (result.length === 0) {\r\n                                joueur = {\r\n                                    id: j,\r\n                                    nom: joueurs[j].info.lastname,\r\n                                    somme: joueurs[j].info.note_final_2015,\r\n                                    notes: [\r\n                                        {\r\n                                            note: joueurs[j].info.note_final_2015,\r\n                                            journee: journee\r\n                                        }\r\n                                    ]\r\n                                };\r\n                                liste_notes.push(joueur);\r\n                            } else {\r\n                                index = liste_notes.indexOf(result[0]);\r\n                                liste_notes[index].somme += joueurs[j].info.note_final_2015;\r\n                                liste_notes[index].notes.push(\r\n                                    {\r\n                                        note: joueurs[j].info.note_final_2015,\r\n                                        journee: journee\r\n                                    }\r\n                                );\r\n                                // console.log(result);\r\n                            }\r\n                        }\r\n\r\n                    }\r\n                }\r\n            }\r\n\r\n            $('.page').append(\r\n                $('<div/>').addClass('actions').append(\r\n                    $('<button/>').addClass('btn btn-success').attr('type', 'button').attr('data-toggle', 'modal').attr('data-target', '#addMatch').text('Ajouter un match'),\r\n                    $('<div/>').addClass('modal fade').attr('id', 'addMatch').attr('role', 'dialog').attr('aria-labelledby', 'addMatch').append(\r\n                        $('<div/>').addClass('modal-dialog').attr('role', 'document').append(\r\n                            $('<div/>').addClass('modal-content').append(\r\n                                $('<div/>').addClass('modal-header').append(\r\n                                    $('<button/>').attr('type', 'button').addClass('close').attr('data-dismiss', 'modal').attr('aria-label', 'Close').append(\r\n                                        $('<span/>').attr('aria-hidden', 'true').html('&times;')\r\n                                    ),\r\n                                    $('<h4/>').addClass('modal-title').attr('id', 'addMatch').text('Ajouter un match - Format JSON')\r\n                                ),\r\n                                $('<div/>').addClass('modal-body').append(\r\n                                    $('<form/>').append(\r\n                                        $('<textarea/>').attr('placeholder', 'Ajouter le fichier json du match ici')\r\n                                    )\r\n                                ),\r\n                                $('<div/>').addClass('modal-footer').append(\r\n                                    $('<button/>').attr('type', 'button').addClass('btn btn-default').attr('data-dismiss', 'modal').text('Annuler'),\r\n                                    $('<button/>').attr('type', 'button').addClass('btn btn-primary').text('Enregistrer')\r\n                                )\r\n                            )\r\n                        )\r\n                    )\r\n                ),\r\n                $('<table/>').addClass('table').attr('data-toggle', 'table').append(\r\n                    $('<thead/>'),\r\n                    $('<tbody/>')\r\n                )\r\n            );\r\n\r\n            $ligne_head = $('<tr/>').append(\r\n                $('<th/>').attr('data-sortable', true).attr('data-field', 'joueur').text('Joueur'),\r\n                $('<th/>').attr('data-sortable', true).attr('data-field', 'moyenne').text('Moyenne')\r\n            );\r\n\r\n            for (i = 0; i < liste_journees.length; i += 1) {\r\n                $ligne_head.append($('<th/>').attr('data-sortable', true).attr('data-field', 'J' + liste_journees[i]).text('J' + liste_journees[i]));\r\n            }\r\n            $('.page table thead').append($ligne_head);\r\n\r\n            for (i in liste_notes) {\r\n                if (liste_notes.hasOwnProperty(i)) {\r\n                    $ligne = $('<tr/>').append(\r\n                        $('<td/>').html('<strong>' + liste_notes[i].nom + '</strong>')\r\n                    );\r\n                    notes = liste_notes[i].notes;\r\n                    $ligne.append($('<td/>').text(Math.round(liste_notes[i].somme / notes.length * 100) / 100));\r\n                    k = 0;\r\n                    for (j = 0; j < liste_journees.length; j += 1) {\r\n\r\n                        if (notes[k] !== undefined) {\r\n                            if (liste_journees[j] === notes[k].journee) {\r\n                                $ligne.append($('<td/>').text(notes[k].note));\r\n                                k += 1;\r\n                            } else {\r\n                                $ligne.append($('<td/>').text('X'));\r\n                            }\r\n                        } else {\r\n                            $ligne.append($('<td/>').text('X'));\r\n                            k += 1;\r\n                        }\r\n                    }\r\n                    $('.page table tbody').append($ligne);\r\n                }\r\n            }\r\n            $('.page table').bootstrapTable({\r\n                pagination: true\r\n            });\r\n        });\r\n    }\r\n\r\n\r\n    function loadPage() {\r\n        var path = window.location.search,\r\n            tab = path.split('?')[1].split('&'),\r\n            page = tab[0];\r\n\r\n        $('.page.' + page).removeClass('hidden');\r\n\r\n        // selectMenu();\r\n        if (page === 'classement') {\r\n            getClassement();\r\n        } else if (page === 'resultats') {\r\n            getResultats();\r\n        } else if (page === 'statistiques') {\r\n            getStatistiques();\r\n        } else if (page === 'equipes') {\r\n            getEffectifs();\r\n        } else if (page === 'match') {\r\n            getMatch();\r\n        } else if (page === 'ligue1') {\r\n            getLigue1();\r\n        }\r\n        // getHome();\r\n    }\r\n\r\n    loadPage();\r\n});"]}